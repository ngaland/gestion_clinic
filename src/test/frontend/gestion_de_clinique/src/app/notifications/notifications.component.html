<div class="relative font-sans">
    <!-- Bouton de notification -->
    <button (click)="toggleNotifications()" 
            class="relative p-2 bg-gray-700 text-white rounded-full shadow-lg hover:shadow-2xl transition-all duration-300 focus:outline-none ring-2 ring-green-400">
      <!-- IcÃ´ne cloche -->
      <i class="fas fa-bell"></i>
  
      <!-- Badge des notifications non lues -->
      <ng-container *ngIf="notificationsService.unreadCount$ | async as unreadCount">
        <span *ngIf="unreadCount > 0"
              class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-green-500 rounded-full transform translate-x-1/2 -translate-y-1/2 shadow-md animate-pulse">
          {{ unreadCount }}
        </span>
      </ng-container>
    </button>
  
    <!-- Panneau de notifications -->
    <div *ngIf="showNotifications" [@slideFade]
         class="absolute right-0 mt-4 w-96 bg-white dark:bg-gray-800 text-gray-800 dark:text-white rounded-lg shadow-2xl overflow-hidden z-50 border border-gray-200 dark:border-gray-700">
  
      <!-- Header du panneau -->
      <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-green-600 dark:bg-green-700">
        <h3 class="text-lg font-bold tracking-wide text-white flex items-center">
          <i class="fas fa-bell mr-2"></i>Notifications
        </h3>
        <div class="flex space-x-2">
          <button (click)="markAllAsRead()" class="text-sm text-white hover:text-gray-200 transition flex items-center">
            <i class="fas fa-check-double mr-1"></i> Tout lire
          </button>
          <button (click)="deleteAllNotifications()" class="text-sm text-white hover:text-gray-200 transition flex items-center">
            <i class="fas fa-trash-alt mr-1"></i> Tout effacer
          </button>
        </div>
      </div>
  
      <!-- Contenu scrollable -->
      <div class="max-h-96 overflow-y-auto">
        
        <!-- Notifications -->
        <div [@notificationAnimation]="notifications.length">
          <div *ngFor="let notif of notifications" 
               [class.bg-gray-100]="!notif.isRead" 
               [class.dark:bg-gray-700]="!notif.isRead"
               class="p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 cursor-pointer">
           <div class="flex items-start">
             <div class="flex-shrink-0 pt-0.5 mr-3">
               <div class="w-10 h-10 rounded-full flex items-center justify-center" 
                    [ngStyle]="{'background-color': getNotificationColorBg(notif)}">
                 <i [ngClass]="getNotificationIcon(notif)" 
                    class="text-lg text-white"></i>
               </div>
             </div>
             <div class="flex-1">
               <div class="flex justify-between items-start">
                 <p class="text-sm font-semibold">{{ notif?.objMessage }}</p>
                 <div class="flex space-x-1">
                   <button (click)="markAsRead(notif.id); $event.stopPropagation()" 
                           class="text-gray-400 hover:text-green-500 transition" 
                           title="Marquer comme lu">
                     <i class="fas fa-check text-xs"></i>
                   </button>
                   <button (click)="deleteNotification(notif.id); $event.stopPropagation()" 
                           class="text-gray-400 hover:text-red-500 transition" 
                           title="Supprimer">
                     <i class="fas fa-times text-xs"></i>
                   </button>
                 </div>
               </div>
               <p class="text-xs text-gray-600 dark:text-gray-300 mt-1">{{ notif?.message }}</p>
               <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">{{ notif?.timestamp | date:'short' }}</p>
             </div>
           </div>
          </div>
         </div>
  
        <!-- Message si aucune notification -->
        <div *ngIf="notifications.length === 0" 
             class="p-6 text-center text-gray-500 flex flex-col items-center space-y-2">
          <i class="fas fa-bell-slash text-3xl text-gray-400 dark:text-gray-500"></i>
          <span class="font-medium text-gray-600 dark:text-gray-300 tracking-wide">Aucune notification</span>
        </div>
      </div>
    </div>
  </div>
  